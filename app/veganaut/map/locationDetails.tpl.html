<div ng-controller="LocationDetailsCtrl">
    <h1>{{ location.title }}</h1>
    <p>
        <vg-location-type-badge location="location"></vg-location-type-badge>
        <vg-team-badge team="location.team"></vg-team-badge>
    </p>

    <!-- TODO: translate, move more stuff to controller -->
    <div class="pageSection well">
        <p class="lead">
            <span class="glyphicon glyphicon-ok" ng-show="questions.optionsAvailable.completed"></span>
            Ask the staff if they have vegan options
        </p>
        <div class="actionBlock" ng-hide="questions.optionsAvailable.completed">
            <p>
                <button type="button" class="btn btn-block btnTeam locationAction"
                 ng-click="questions.optionsAvailable.showing = true" ng-disabled="questions.optionsAvailable.showing">
                    <span class="glyphicon glyphicon-bullhorn"></span>
                    Tell us about it
                </button>
            </p>

            <div class="questionBlock" ng-show="questions.optionsAvailable.showing">
                <p>Do they have vegan options?</p>
                <button type="button" class="btn btn-default"
                 ng-click="questions.optionsAvailable.showing = false">
                    Cancel
                </button>
                <div class="btn-group pull-right" ng-click="submit(questions.optionsAvailable)">
                    <label class="btn btn-default btnTeam" ng-model="questions.optionsAvailable.answer" btn-radio="true">Yes</label>
                    <label class="btn btn-default btnTeam" ng-model="questions.optionsAvailable.answer" btn-radio="false">No</label>
                </div>
            </div>
        </div>

        <div class="resultBlock" ng-show="questions.optionsAvailable.completed">
            <div ng-show="questions.optionsAvailable.answer">You say there are vegan options available.</div>
            <div ng-hide="questions.optionsAvailable.answer">You say there are no vegan options available.</div>
        </div>
    </div>

    <div class="pageSection well" ng-show="questions.optionsAvailable.answer">
        <p class="lead">
            <span class="glyphicon glyphicon-ok" ng-show="questions.whatOptions.completed"></span>
            Find out what vegan options they have
        </p>
        <div class="actionBlock" ng-hide="questions.whatOptions.completed">
            <p>
                <button type="button" class="btn btn-block btnTeam locationAction"
                 ng-click="questions.whatOptions.showing = true" ng-disabled="questions.whatOptions.showing">
                    <span class="glyphicon glyphicon-bullhorn"></span>
                    Tell us about it
                </button>
            </p>

            <div class="questionBlock" ng-show="questions.whatOptions.showing">
                <form novalidate name="whatOptionsForm" class="whatOptionsForm spacedForm">
                    <input type="text" ng-required="$index === 0" class="form-control"
                     ng-repeat="answer in questions.whatOptions.answers"
                     ng-model="answer.text"
                     placeholder="Vegan Option No. {{ $index + 1 }}"/>
                    <button type="button" class="btn btn-default"
                     ng-click="questions.whatOptions.showing = false">
                        Cancel
                    </button>
                    <button type="submit" class="btn btn-default btnTeam pull-right"
                     ng-disabled="whatOptionsForm.$invalid" ng-click="submit(questions.whatOptions)">
                        <span class="glyphicon glyphicon-ok"></span>
                        Speichern
                    </button>
                </form>
            </div>
        </div>

        <div class="resultBlock" ng-show="questions.whatOptions.completed">
            You know of the following options:
            <ul>
                <li ng-repeat="answer in questions.whatOptions.answers">{{ answer.text }}</li>
            </ul>
        </div>
    </div>

    <leaflet class="locationDetailMap"
     markers="[location]" defaults="mapSettings" center="center">
    </leaflet>
</div>
